<?php$elemIdHidden = CHtml::activeId($model,$attribute);$elemIdShow = $elemIdHidden.'_shown_';$elemIdUploadify = $elemIdHidden.'_uploadify_';$appendToFilename = $elemIdHidden;$baseUrl = Yii::app()->baseUrl;$uploadsDir = Helper::getUploadsDir();Yii::app()->clientScript->registerScriptFile($baseUrl.'/js/uploadify/jquery.uploadify.js');Yii::app()->clientScript->registerScript('uploadify',"$('#".$elemIdUploadify."').fileUpload({  'uploader': '".$baseUrl."/images/uploadify/uploader.swf',  'script': '".$baseUrl."/uploads/upload.php',  'cancelImg': '".$baseUrl."/images/uploadify/cancel.png',  'folder': '".$uploadsDir."',  'method' : 'POST',  'scriptData': {'appendToFilename':'".$appendToFilename."'},  'multi' : false,  'fileSizeLimit' : '1MB',  'auto' : true,  'removeCompleted' : false,  'fileExt': '*.jpg;*.jpeg;*.pdf;',  'onComplete': complete,  'onError' : function (a, b, c, d) {                if (d.status == 404)                    alert('Could not find upload script. Use a path relative to: '+'".(getcwd())."');                else if (d.type === 'HTTP')                   alert('error '+d.type+': '+d.status);                else if (d.type ==='File Size')                   alert(c.name+' '+d.type+' Limit: '+Math.round(d.sizeLimit/1024)+'KB');                else                   alert('error '+d.type+': '+d.text);              },});",CClientScript::POS_READY);Yii::app()->clientScript->registerScript('uploadify-start',"function complete(evnt, queueID, fileObj, response, data){  var r = $.parseJSON(response);  var rFile = '\''+ r.newFilename +'\'';  $('#".$elemIdHidden."').val(r.newFilename);  $('#".$elemIdShow."').html('<p><a onclick=\"removeFile('+rFile+')\" href=\"#\"><i class=\"icon-remove\"></i></a>'+r.newFilename+'</p>');}function removeFile(file){  var url = '".$baseUrl."/uploads/delete.php';  var params = 'f=' + file;  $.post(url,params,function(response){    console.log(response)  });  $('#".$elemIdShow."').html('');  $('#".$elemIdHidden."').val('');}",CClientScript::POS_BEGIN);?><div class="control-group ">  <?php echo $form->label($model,$attribute,array('class'=>'control-label')); ?>  <div class="controls">    <?php echo $form->hiddenField($model,$attribute); ?>    <?php echo $form->error($model,$attribute); ?>    <span id="<?php echo $elemIdUploadify; ?>" class="alert alert-error">Uploadify Error! Update your Flash Player and allow Javascript.</span>    <div id="<?php echo $elemIdShow; ?>"></div>  </div></div>